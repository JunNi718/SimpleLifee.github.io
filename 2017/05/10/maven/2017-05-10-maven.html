<hr>
<p>title: maven<br>tags: maven</p>
<hr>
 <div align="center"><br>  想学习Maven吗？<br><br></div>

<!-- more -->
<h1 id="常用的构建命令"><a href="#常用的构建命令" class="headerlink" title="常用的构建命令"></a>常用的构建命令</h1><p>mvn </p>
<ul>
<li>v 查看版本</li>
</ul>
<ul>
<li>compile 编译</li>
</ul>
<ul>
<li>test 测试</li>
</ul>
<ul>
<li>package  打包<ul>
<li>会依次执行  clean 、</li>
</ul>
</li>
<li>clean 删除target文件夹</li>
<li>Install 安装jar包到本地仓库中</li>
</ul>
<h1 id="自动创建目录骨架"><a href="#自动创建目录骨架" class="headerlink" title="自动创建目录骨架"></a>自动创建目录骨架</h1><p>创建目录的两种方式：</p>
<ol>
<li>mvn archetype:generate 按照提示进行选择</li>
</ol>
<ol>
<li><p>mvn archetype:generate -DgroupId=组织名，公司网址的反写+项目名</p>
<p>​                        -DartifactId=项目名-模块名</p>
<p>​                        -Dversion=版本号</p>
<p>​                        -Dpackage=代码所在的包名</p>
</li>
</ol>
<p>src/main/java:存放java源文件</p>
<p>src/main/resources:存放项目配置文件，如spring.xml,hibernate.cfg.xml。。。</p>
<p>src/test/java:存放test的java文件</p>
<p>src/test/resources:存放test时候所需的配置文件</p>
<h1 id="maven中的坐标和仓库"><a href="#maven中的坐标和仓库" class="headerlink" title="maven中的坐标和仓库"></a>maven中的坐标和仓库</h1><h2 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h2><p>在<code>&lt;dependency&gt;</code>中的就是坐标</p>
<pre><code class="Xml"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.nimon.maven01<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven01-model<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  
  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
</code></pre>
<blockquote>
<p>项目的包名，建议和groupId和artifactId相吻合，这样看起来，就更加清晰，符合逻辑，也更方便搜索。</p>
</blockquote>
<h2 id="构件"><a href="#构件" class="headerlink" title="构件"></a>构件</h2><p>在maven世界中，任何一个依赖、插件、项目构建的输出，都可以被称作为<strong>构件</strong>。</p>
<p><strong>构件</strong>通过坐标作为其唯一的标识，就好像我们的工作单位和家庭地址。</p>
<blockquote>
<p>收宝贝的时候，不是收到的那一刻，而是中间等待的过程。</p>
</blockquote>
<h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>​    本地仓库和远程仓库</p>
<p>​    <a href="http://search.maven.org/">查看仓库</a></p>
<p>​    <a href="https://repo.maven.apache.org/maven2/">全球中央仓库</a></p>
<p>​    <a href="http://mvnrepository.com/">MVN Repository</a></p>
<h2 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h2><blockquote>
<p>一旦配置了镜像，那么所有访问都会到镜像仓库中，原仓库将不能直接访问。</p>
<p>maven主目录 &gt; conf &gt; settings.xml &gt; 146行</p>
</blockquote>
<pre><code class="Xml"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span>
  <span class="tag">&lt;<span class="name">id</span>&gt;</span>maven.net.cn<span class="tag">&lt;/<span class="name">id</span>&gt;</span>
  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>
  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Central mirror in china<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.net.cn/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span>
<span class="tag">&lt;/<span class="name">mirror</span>&gt;</span>
</code></pre>
<h2 id="更改仓库位置"><a href="#更改仓库位置" class="headerlink" title="更改仓库位置"></a>更改仓库位置</h2><blockquote>
<p>maven从远程中央仓库下载默认是存放在当前用户目录中</p>
<p>​    即 ~/.m2/repository</p>
</blockquote>
<p>修改 <code>settings.xml</code>文件，复制第 53 行的内容</p>
<pre><code>&lt;localRepository&gt;/Users/nimon/nj/proj/maven/repo&lt;/localRepository&gt;
</code></pre><p>其中路径表示新仓库的位置。然后复制一份 <code>settings.xml</code>  到 <code>repo</code> 目录下，这样我们以后更新maven版本就不用再修改原始的 <code>settings.xml</code></p>
<h1 id="maven的生命周期和插件"><a href="#maven的生命周期和插件" class="headerlink" title="maven的生命周期和插件"></a>maven的生命周期和插件</h1><h2 id="完整的项目构建过程包括"><a href="#完整的项目构建过程包括" class="headerlink" title="完整的项目构建过程包括"></a>完整的项目构建过程包括</h2><p>清理、编译、测试、打包、集成测试、验证、部署</p>
<p>maven将其进行抽象。实际上，maven和插件是密不可分的，maven抽象出一套项目构建的生命周期，而插件是对maven抽象的具体实现。</p>
<p>比如，我们对项目进行编译，</p>
<h2 id="maven中定义了三套独立的生命周期"><a href="#maven中定义了三套独立的生命周期" class="headerlink" title="maven中定义了三套独立的生命周期"></a>maven中定义了三套独立的生命周期</h2><ol>
<li>clean    清理项目</li>
<li>default  构建项目</li>
<li>site   生成项目站点</li>
</ol>
<p>这三套生命周期是相互独立的，每个生命周期又包含一些阶段，这些阶段是有顺序的，后面的阶段依赖于前面的阶段。在执行的时候，前面的阶段会顺序执行，并不会触发另外两个生命周期中的阶段。</p>
<h3 id="clean-清理项目阶段"><a href="#clean-清理项目阶段" class="headerlink" title="clean 清理项目阶段"></a>clean 清理项目阶段</h3><p>pre-clean 执行清理前的工作</p>
<p>clean 清理上一次构建的文件</p>
<p>post-clean 执行清理后的文件</p>
<h3 id="default-构建项目（最核心）"><a href="#default-构建项目（最核心）" class="headerlink" title="default 构建项目（最核心）"></a>default 构建项目（最核心）</h3><p>compile test package install</p>
<h3 id="site-生成项目站点"><a href="#site-生成项目站点" class="headerlink" title="site 生成项目站点"></a>site 生成项目站点</h3><p>pre-site 在生成项目站点前要完成工作</p>
<p>site  生成项目的站点文档</p>
<p>post-site  在生成项目站点后要完成的工作</p>
<p>site-deploy  发布生成的站点到服务器</p>
<p>可以去 <strong><a href="https://maven.apache.org/plugins">官方插件</a></strong> ，查找使用插件</p>
<h1 id="pom-xml常用元素"><a href="#pom-xml常用元素" class="headerlink" title="pom.xml常用元素"></a>pom.xml常用元素</h1><p>pom.xml是maven项目的核心管理文件，用于项目描述、组织管理、依赖管理和构建信息的管理。 </p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span>
    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span>   

    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>组织名，公司网址的反写+项目名<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>项目名-模块名<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="comment">&lt;!--打包类型，默认是jar
        war zip pom    
    --&gt;</span>
    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>
      <span class="comment">&lt;!--第一个0表示大版本号
    第二个0 表示分支版本号
    第三个0 表示小版本号
    SNAPSHOT ：不稳定，尚处于开发中，快照版本
    ALPHA ：是内部测试版,一般不向外部发布,会有很多Bug.一般只有测试人员使用。
    Beta：也是测试版，这个阶段的版本会一直加入新的功能。在Alpha版之后推出。
    RELEASE ：稳定版
    GA ：正式发布
    --&gt;</span>
    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
    <span class="comment">&lt;!--项目描述名--&gt;</span>
    <span class="tag">&lt;<span class="name">name</span>&gt;</span>maven05-demo Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
      <span class="comment">&lt;!--项目地址--&gt;</span>
    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span>
    <span class="comment">&lt;!--项目描述--&gt;</span>
    <span class="tag">&lt;<span class="name">description</span>&gt;</span><span class="tag">&lt;/<span class="name">description</span>&gt;</span>
      <span class="tag">&lt;<span class="name">developers</span>&gt;</span><span class="tag">&lt;/<span class="name">developers</span>&gt;</span>
      <span class="tag">&lt;<span class="name">licenses</span>&gt;</span><span class="tag">&lt;/<span class="name">licenses</span>&gt;</span>
      <span class="tag">&lt;<span class="name">organization</span>&gt;</span><span class="tag">&lt;/<span class="name">organization</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
              <span class="comment">&lt;!--只存在于测试的 classpath 中--&gt;</span>
            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
              <span class="tag">&lt;<span class="name">type</span>&gt;</span><span class="tag">&lt;/<span class="name">type</span>&gt;</span>
              <span class="comment">&lt;!--设置依赖是否可选--&gt;</span>
              <span class="tag">&lt;<span class="name">optional</span>&gt;</span><span class="tag">&lt;/<span class="name">optional</span>&gt;</span>
              <span class="comment">&lt;!--排除依赖传递列表--&gt;</span>
              <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span>
                  <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span>

                  <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span>
              <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span>
        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>

      <span class="comment">&lt;!--依赖的管理，不会被运行和引入到实际的依赖中--&gt;</span>
      <span class="tag">&lt;<span class="name">dependencyManagerment</span>&gt;</span>
          <span class="comment">&lt;!--主要定义在父模块中，供子模块集成用的--&gt;</span>
          <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>

          <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">dependencyManagerment</span>&gt;</span>

      <span class="comment">&lt;!--插件列表--&gt;</span>
       <span class="tag">&lt;<span class="name">build</span>&gt;</span>
        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span>
            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>
                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
                  <span class="comment">&lt;!--上面三项是坐标--&gt;</span>
                <span class="tag">&lt;<span class="name">executions</span>&gt;</span>
                    <span class="tag">&lt;<span class="name">execution</span>&gt;</span>
                        <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span>
                        <span class="tag">&lt;<span class="name">goals</span>&gt;</span>
                            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span>
                        <span class="tag">&lt;/<span class="name">goals</span>&gt;</span>
                    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span>
                <span class="tag">&lt;/<span class="name">executions</span>&gt;</span>
            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>

            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span>
                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>
        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span>
        <span class="comment">&lt;!--子模块对父模块的继承--&gt;</span>
           <span class="tag">&lt;<span class="name">parent</span>&gt;</span><span class="tag">&lt;/<span class="name">parent</span>&gt;</span>
        <span class="comment">&lt;!--聚合多个maven运行项--&gt;</span>
           <span class="tag">&lt;<span class="name">modules</span>&gt;</span><span class="tag">&lt;/<span class="name">modules</span>&gt;</span>

        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>maven05-demo<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">build</span>&gt;</span>

<span class="tag">&lt;/<span class="name">project</span>&gt;</span>
</code></pre>
<h1 id="依赖范围"><a href="#依赖范围" class="headerlink" title="依赖范围"></a>依赖范围</h1><p>我们平时在开发时，如果要使用某一个框架，就需要把框架的jar包引入项目的 classpath 中，这样我们的项目就可以使用 框架为我们封装好的一些方法。maven给我们提供了三种classpath：</p>
<ol>
<li>编译</li>
<li>测试 test</li>
<li>运行  </li>
</ol>
<p>所以依赖的范围就是控制依赖于三种 classpath 的关系的。</p>
<p>有六中依赖范围的值可以选择：</p>
<ul>
<li>compile 默认的范围，如果没有明确指定，编译依赖将在所有的 classpath 中都有效，而且会传递到依赖项目中。</li>
<li>provided  在编译和测试的时候有效</li>
<li>runtime 在测试和运行时有效</li>
<li>test 只在测试的时候有效</li>
<li>system 于本机系统相关联，可移植性差</li>
<li>import 导入的范围，它只使用在 dependencyManagerment ，表示从其他 pom 中导入的 dependency 的配置。</li>
</ul>
<p>例如</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">project</span>&gt;</span>
  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span>
  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>B<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span>
  <span class="tag">&lt;<span class="name">name</span>&gt;</span>B<span class="tag">&lt;/<span class="name">name</span>&gt;</span>
  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
  <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span>
    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>A<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span>
        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
      .....
</code></pre>
<h1 id="依赖传递"><a href="#依赖传递" class="headerlink" title="依赖传递"></a>依赖传递</h1><p>一个小案例</p>
<p>shanji 依赖于 nage</p>
<p>nage 依赖于 bge</p>
<p>bge的依赖关系</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
 <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>
</code></pre>
<p>nage的依赖关系</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-bge<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>

  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>
</code></pre>
<p>shanji的依赖关系</p>
<pre><code class="Xml"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-nage<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span>
        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span>
          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-bge<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>
</code></pre>
<p>这时候nage下就有bge的依赖jar包，shanji下有bge和nage的依赖jar包。</p>
<p>但是由于依赖的传递性，shanji 只依赖于nage ，shanji 项目中会出现 bge 的jar包。有时候，这不是我们想要的。</p>
<p>这时可以在 nage 依赖下使用 <exclusions>  把 bge 排除在外。</p>
<h1 id="依赖冲突"><a href="#依赖冲突" class="headerlink" title="依赖冲突"></a>依赖冲突</h1><blockquote>
<p>eg 对不同版本的同一个构建。</p>
</blockquote>
<ol>
<li><p>短路优先</p>
<p>A -&gt; B -&gt; C -&gt; X（JAR)</p>
<p>A -&gt; D -&gt; X（JAR)    <strong>优先</strong></p>
</li>
</ol>
<p>举例：</p>
<p>在 bge 中添加commons-io 2.5的版本依赖</p>
<p>在 nage 中添加commons-io 2.0的版本依赖</p>
<p>这时候在 shanji 项目中就会出现 2.0 的版本，因为shanji 离 nage 比较近。</p>
<ol>
<li>先声明先优先</li>
</ol>
<p>如果路径长度相同，谁先声明，先解析谁。</p>
<p>举例：</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-bge<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>

    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-nage<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
      <span class="comment">&lt;!--&lt;exclusions&gt;--&gt;</span>
        <span class="comment">&lt;!--&lt;exclusion&gt;--&gt;</span>
          <span class="comment">&lt;!--&lt;groupId&gt;com.hongxing&lt;/groupId&gt;--&gt;</span>
          <span class="comment">&lt;!--&lt;artifactId&gt;hongxing-bge&lt;/artifactId&gt;--&gt;</span>
        <span class="comment">&lt;!--&lt;/exclusion&gt;--&gt;</span>
      <span class="comment">&lt;!--&lt;/exclusions&gt;--&gt;</span>
    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>
</code></pre>
<p>这时候，项目中 commons-io 的版本就变成了 2.5，因为是先声明 bge ，后声明 nage 。</p>
<h1 id="聚合和继承"><a href="#聚合和继承" class="headerlink" title="聚合和继承"></a>聚合和继承</h1><p>如果在maven中有多个项目，我们想要 install 将其放到本地仓库中， 必须对其依次执行 install 命令</p>
<p>maven 给我提供了一个解决办法，就是使用 <strong>聚合</strong> </p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">modules</span>&gt;</span>
  <span class="tag">&lt;<span class="name">module</span>&gt;</span>../hongxing-bge<span class="tag">&lt;/<span class="name">module</span>&gt;</span>
  <span class="tag">&lt;<span class="name">module</span>&gt;</span>../hongxing-nage<span class="tag">&lt;/<span class="name">module</span>&gt;</span>
  <span class="tag">&lt;<span class="name">module</span>&gt;</span>../hongxing-shanji<span class="tag">&lt;/<span class="name">module</span>&gt;</span>
<span class="tag">&lt;/<span class="name">modules</span>&gt;</span>
</code></pre>
<p>然后执行 install 命令，就会自动把三个module都安装到本地仓库中了。</p>
<p>定义父容器</p>
<pre><code class="xml">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span>
    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span>
    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>
        3.8.1
    <span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span>
<span class="tag">&lt;/<span class="name">properties</span>&gt;</span>

<span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span>
    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>
        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>
            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${junit.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span>
<span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span>
</code></pre>
<p>然后在子类中使用</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">parent</span>&gt;</span>
  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.hongxing<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hongxing-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
<span class="tag">&lt;/<span class="name">parent</span>&gt;</span>
</code></pre>
<blockquote>
<p>注意修改  <strong><packaging></strong> 为pom</p>
</blockquote>
<h1 id="使用maven构建web项目"><a href="#使用maven构建web项目" class="headerlink" title="使用maven构建web项目"></a>使用maven构建web项目</h1><p>Next，这里在Properties中添加一个参数<code>archetypeCatalog=internal</code>，不加这个参数，在maven生成骨架的时候将会非常慢，有时候会直接卡住。</p>
<p>来自网上的解释：</p>
<blockquote>
<p>archetypeCatalog表示插件使用的archetype元数据，不加这个参数时默认为remote，local，即中央仓库archetype元数据，由于中央仓库的archetype太多了，所以导致很慢，指定internal来表示仅使用内部元数据。</p>
</blockquote>
<p><img src="maven.png" alt=""></p>
<p>使用 jetty 发布</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span>
  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.eclipse.jetty<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jetty-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>
  <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.4.4.v20170414<span class="tag">&lt;/<span class="name">version</span>&gt;</span>
  <span class="tag">&lt;<span class="name">executions</span>&gt;</span>
    <span class="tag">&lt;<span class="name">execution</span>&gt;</span>
      <span class="comment">&lt;!--在打包成功后使用jetty:run来运行jetty服务--&gt;</span>
      <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span>  <span class="comment">&lt;!--指定在package阶段的时候--&gt;</span>
      <span class="tag">&lt;<span class="name">goals</span>&gt;</span>
        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>run<span class="tag">&lt;/<span class="name">goal</span>&gt;</span>
      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span>
    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span>
  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span>
<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span>
</code></pre>
